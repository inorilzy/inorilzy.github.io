---
title: 魔法函数指南
author: 
categories: [python]
tags: []
date: 2023-06-05 19:33:49 +0800
---

## 简介

 Python 中的魔法方法（magic methods）是特殊的预定义方法，其名称以双下划线开头和结尾（例如 `__init__`）。这些方法可以用于定制类的行为和操作，从而使其更加灵活和易用。魔法方法可以分为以下几类：

1. 对象创建和初始化类：

    - `__new__(cls, ...)`: 用于创建对象。
    - `__init__(self, ...)`: 用于初始化对象。
    - `__del__(self)`:魔法方法。该方法在对象被删除时自动调用，用于执行一些清理操作，例如关闭文件、释放资源等。


1. 对象表示和转换：

    - `__str__(self)`: 定义了该类的实例被打印时的输出内容。
    - `__repr__(self)`: 定义了该类的实例在交互模式下被调用时的输出内容。
    - `__format__(self, format_spec)`: 定义了该类的实例被格式化时的输出形式。
    - `__bytes__(self)`: 定义了该类的实例被转换成字节序列的方式。

1. 属性访问和设置：

    - `__getattr__(self, name)`: 在对象的属性未找到时被调用。
    - `__getattribute__(self, name)`: 在对象的属性被访问时被调用。
    - `__setattr__(self, name, value)`: 在对象的属性被设置时被调用。
    - `__delattr__(self, name)`: 在对象的属性被删除时被调用。

1. 运算符重载：

     `__eq__(self, other)`: 定义了相等操作符（==）的实现。
     `__ne__(self, other)`: 定义了不等于操作符（!=）的实现。
     `__lt__(self, other)`: 定义了小于操作符（<）的实现。
     `__le__(self, other)`: 定义了小于等于操作符（<=）的实现。
     `__gt__(self, other)`: 定义了大于操作符（>）的实现。
     `__ge__(self, other)`: 定义了大于等于操作符（>=）的实现。
     `__add__(self, other)`: 定义了加法操作符（+）的实现。
     `__sub__(self, other)`: 定义了减法操作符（-）的实现。
     `__mul__(self, other)`: 定义了乘法操作符（*）的实现。
     `__truediv__(self, other)`: 定义了真除法操作符（/）的实现。
     `__floordiv__(self, other)`: 定义了整除法操作符（//）的实现。
     `__mod__(self, other)`: 定义了取模操作符（%）的实现。
     `__pow__(self, other [, modulo])`: 定义了幂次方操作符（**）的实现。
     `__and__(self, other)`: 定义了按位与操作符（&）的实现。
     `__or__(self, other)`: 定义了按位或操作符（|）的实现。
     `__xor__(self, other)`: 定义了按位异或操作符（^）的实现。
     `__lshift__(self, other)`: 定义了左移操作符（<<）的实现。
     `__rshift__(self, other)`: 定义了右移操作符（>>）的实现。

1. 序列和映射：

    - `__len__(self)`: 定义了该类的实例长度，即元素的个数。
    - `__getitem__(self, key)`: 定义了该类的实例通过索引访问元素的方式。
    - `__setitem__(self, key, value)`: 定义了该类的实例通过索引设置元素的方式。
    - `__delitem__(self, key)`: 定义了该类的实例通过索引删除元素的方式。
    - `__iter__(self)`: 定义了该类的实例可迭代的方式。
    - `__reversed__(self)`: 定义了该类的实例反向迭代
